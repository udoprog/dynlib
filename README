I needed this type of library for a parser I was writing.
Focus is on:
  - Memory detention, 0% memory loss (since all objects are allocated in the same space).
  - Simple, yet dynamic allocation.

Install libdyn (default PREFIX=/usr/local)

make install

Compile Example 1:

gcc example1.c -ldyn

Example 1 (example1.c):

#include <string.h>
#include <stdio.h>

#include "dyn/store.h"

int main()
{
  dstore ds;
  ds_init(&ds);
  
  char *str = ds_get(&ds, 100);
  
  strcpy(str, "this is a test string");
  
  printf("str = %s\n", str);
  
  printf("memory usage (more is pre-allocated) = %d\n", ds_size(&ds));
  
  ds_free(&ds); // the string is freed here.
  
  dstore ds2;
  dstream dss;
  
  ds_init(&ds2);
  ds_stream_init(&ds2, &dss);
  
  ds_stream_write(&dss, "test1", 5);
  ds_stream_write(&dss, "test2", 5);
  ds_stream_write(&dss, "test3", 5);
  
  // must close
  char *final_string = ds_stream_close(&dss);
  
  printf("final_string = %s\n", final_string);

  printf("memory usage (more is pre-allocated) = %d\n", ds_size(&ds2));
  
  ds_free(&ds2); // final_string is release here
}
